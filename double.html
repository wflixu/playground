<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
       img {
           border:1px solid #999;
          
       }
       .origin{
           width: 100%;
           /* height:100%; */
           
       }
       .wrap{
        border:1px solid #999;
           width:100px;
           height:100px;
           float: left;
           overflow: hidden;
       }
       .clear{
           height: 20px;
           clear: both;
       }
       

    </style>
</head>

<body>
    <div id="app">
        <div class="wrap">
                <img class="origin" src="static/images/1.png">
        </div>
        <div class="wrap">
            <img  class="origin" src="static/images/2.png" alt="" srcset="">
        </div>
        <div class="wrap">
               
          <img class="origin" src="static/images/3.png" alt="" srcset="">
        </div>

        <hr>
        <div class="clear"></div>
        <br>
      
        <div class="wrap">
                <img src="static/images/1.png" onload="setImg(this)" data-ratio="1">
        </div>
        <div class="wrap">
                <img src="static/images/2.png" alt="" srcset="" onload="setImg(this)" data-ratio="1"> 
        </div>
        <div class="wrap">
                <img src="static/images/3.png" alt="" srcset="" onload="setImg(this)" data-ratio="1"> 
        </div>
      
         
        <div class="clear"></div>
   
        
     
         
        
         

    </div>

    <script>
        function setImg(e) {

            var _dom = e;
            var _ratio = _dom.getAttribute('data-ratio') ? _dom.getAttribute('data-ratio') : 1;
            var img = new Image();
            img.src = _dom.src;
            var _imgStyle = { height: '100%', width: 'initial' };

            img.onload = function () {
                if (img.width > img.height * _ratio) {
                    _imgStyle = { height: '100%', width: 'initial' };
                    // if (_ratio != 1) {
                    //     _imgStyle = {
                    //         height: '100%',
                    //         width: img.width / img.height * 100 / _ratio + '%',
                    //         maxWidth: img.width / img.height * 100 / _ratio + '%'
                    //     };
                    // }
                } else if (img.width < img.height * _ratio) {
                    _imgStyle = { height: 'initial', width: '100%' };
                } else {
                    _imgStyle = { height: '100%', width: '100%' };
                }
                _dom.style.width = _imgStyle.width;
                _dom.style.height = _imgStyle.height;
                if (_imgStyle.maxWidth) {
                    _dom.style.maxWidth = _imgStyle.maxWidth;
                }
                img.onload = null;
            };
        }
    </script>
</body>

</html>